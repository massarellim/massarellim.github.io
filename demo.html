<!doctype html>
<!--
 @license
 Copyright 2022 Google LLC. All Rights Reserved.
 SPDX-License-Identifier: Apache-2.0
-->
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="description" content="Display a GPT-managed anchor ad." />
    <title>Display an anchor ad</title>
    <script
      async
      src="https://securepubads.g.doubleclick.net/tag/js/gpt.js"
      crossorigin="anonymous"
    ></script>
    <script async src="//cdn.jsdelivr.net/npm/prebid.js@latest/dist/not-for-prod/prebid.js"></script>

    <script>
     
      window.googletag = window.googletag || { cmd: [] };
      window.pbjs = window.pbjs || { cmd: [] }
      let anchorSlot;

      googletag.cmd.push(() => {
        googletag.pubads().disableInitialLoad();
      })
       
      googletag.cmd.push(() => {
       
        anchorSlot = googletag.defineOutOfPageSlot(
          "/6355419/Travel",
          document.body.clientWidth <= 500
            ? googletag.enums.OutOfPageFormat.TOP_ANCHOR
            : googletag.enums.OutOfPageFormat.BOTTOM_ANCHOR,
        );

        // Anchor slots return null if the page or device does not support anchors.
        if (anchorSlot) {
          anchorSlot.setTargeting("test", "anchor").addService(googletag.pubads());

          document.getElementById("status").innerText =
            "Anchor ad is initialized. Scroll page to activate.";
        }

        // Define static ad slots.
        googletag
          .defineSlot("/6355419/Travel/Europe", [300, 250], "static-ad-1")
          .addService(googletag.pubads());

        // Enable SRA and services.
        googletag.pubads().enableSingleRequest();
        googletag.enableServices();

        // Prebid config
        pbjs.cmd.push(function() {
           
          var sizes = [
            [320, 50]
          ];
          var PREBID_TIMEOUT = 700;
          
          var adUnits = [{
            code: '/19968336/header-bid-tag-1',
            mediaTypes: {
              banner: {
                sizes: sizes
              }
            },
            bids: [{
              bidder: 'appnexus',
              params: {
                placementId: 13144370
              }
            }]
          }];
          
          pbjs.addAdUnits(adUnits)

          pbjs.setConfig({
            debugging: {
              enabled: true,
              intercept: [
                {
                  when: {
                    adUnitCode: '/19968336/header-bid-tag-1',
                    bidder: 'appnexus'
                  },
                  then: {
                    cpm: 10
                  }
                },
              ]
            }
          });
         
          pbjs.requestBids({bidsBackHandler:function(){
              pbjs.setTargetingForGPTAsync();
              googletag.pubads().refresh();}
          });
         
        });
      });
     
    </script>
    <style></style>
  </head>
  <body>
    <div id="page-content" style="height: 900vh">
      <h1 id="status">Anchor ads are not supported on this page.</h1>
      <div id="static-ad-1" style="width: 300px; height: 250px"></div>
    </div>
    <script>
      googletag.cmd.push(() => {
        // Ensure the first call to display comes after static ad slot
        // divs are defined. If you do not have any static ad slots, this
        // call can be made immediately after services are enabled.
        googletag.display(anchorSlot);
      });
    </script>
  </body>
</html>
